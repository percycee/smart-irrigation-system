<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Smart Irrigation System</title>
  <link rel="stylesheet" href="/static/style.css">
</head>

<body>
  <div id="app">
    <header class="app-header">
      <div>
        <h1>Smart Irrigation System</h1>
        <p class="subtitle">
          Live demo of soil moisture, automatic watering, and manual override.
        </p>
      </div>
      <div class="badge badge-demo">DEMO</div>
    </header>

    <div class="grid-row">
      <!-- STATUS CARD -->
      <section class="card">
        <h2>Live Status</h2>

        <div class="status-row">
          <div class="status-block">
            <div class="status-label">Moisture</div>
            <div id="moistureValue" class="status-value">– %</div>
            <div id="sensorValue" class="status-sub">Sensor: –</div>
            <!-- NEW: classification line -->
            <div id="moistureLabel" class="status-sub">Status: --</div>
          </div>

          <div class="status-block">
            <div class="status-label">Watering</div>
            <div id="status-text" class="status-chip status-off">
              Watering is OFF
            </div>
          </div>
        </div>

        <div id="alert-box" class="alert-box" style="display:none;"></div>
      </section>

      <!-- CONTROLS CARD -->
      <section class="card">
        <h2>Controls</h2>
        <p class="small-note">
          The system waters automatically when soil is too dry.
          You can still start watering manually (unless soil is oversaturated).
        </p>

        <div class="controls-row">
          <button id="startBtn" class="btn primary">
            Start Watering
          </button>
          <button id="stopBtn" class="btn">
            Stop Watering
          </button>
        </div>
      </section>
    </div>

    <div class="grid-row">
      <!-- LOG CARD -->
      <section class="card">
        <h2>Event Log</h2>
        <ul id="log-list" class="log-list small-note"></ul>
      </section>

      <!-- NOTES CARD -->
      <section class="card">
        <h2>Moisture Threshold Notes</h2>
        <p class="small-note">
          The soil-moisture sensor returns a raw value from 0–4095.  
          We convert this to a 0–100% dryness value for the UI
          (higher % = drier soil). Exact raw values depend on calibration,
          so we use simple cutoff points for the demo:
        </p>
        <ul class="small-note">
          <li><strong>Below 40%</strong> -> soil too dry -> auto watering <strong>ON</strong></li>
          <li><strong>40-80%</strong> -> healthy range -> watering <strong>OFF</strong></li>
          <li><strong>Above 80%</strong> -> oversaturated -> watering <strong>blocked</strong></li>
        </ul>
      </section>
    </div>
  </div>

  <script src="/static/logic.js"></script>
</body>
</html>
